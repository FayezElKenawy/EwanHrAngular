<!--begin::Portlet-->
<div
  class="details"
  *authorization="{ actionName: 'sales-service-request-edit', pageLevel: true }"
>
  <div class="m-portlet m-0">
    <div class="m-portlet__head">
      <div class="m-portlet__head-caption">
        <div class="m-portlet__head-title">
          <h6 class="m-portlet__head-text">
            <a routerLink="/sales/list-requests-services" class="back-icon">
              <i class="fa fa-arrow-alt-circle-right"></i>
            </a>
            {{ "Sales.Titles.EditServiceRequest" | translate }}
          </h6>
        </div>
      </div>
    </div>
    <div class="m-portlet__body">
      <!--begin::Form-->
      <form
        class="m-form m-form--fit m-form--label-align-right"
        [formGroup]="form"
        (ngSubmit)="editServiceRequest()"
        autocomplete="off"
      >
        <div class="row tableHeader mx-0 px-0">
          <label class="m-form__heading-title py-3 mb-0">{{
            "Sales.Titles.ServiceRequestData" | translate
          }}</label>
        </div>
        <div class="tableBody row mx-0 py-2 px-0">
          <!-- requestServiceNumberRef -->
          <div class="col-lg-2 col-md-4 col-12">
            <div class="form-group m-form__group row mx-0 px-0">
              <div class="col-12 px-0">
                <label
                  class="form-control-label"
                  for="requestServiceNumberRef"
                  >{{ "Sales.Fields.RefNumber" | translate }}</label
                >
                <!-- <span class="required">*</span> -->
              </div>
              <div class="col-12 px-0">
                <input
                  class="form-control"
                  id="requestServiceNumberRef"
                  placeholder="{{ 'Sales.Fields.RefNumber' | translate }}"
                  type="text"
                  formControlName="RefNumber"
                />
              </div>
            </div>
          </div>

          <!-- requestServiceDate -->
          <div class="col-lg-2 col-md-4 col-12">
            <div class="form-group m-form__group row mx-0 px-0">
              <div class="col-12 px-0">
                <label class="form-control-label" for="requestServiceDate">{{
                  "Sales.Fields.ServiceRequestDate" | translate
                }}</label>
                <span class="required">*</span>
              </div>
              <div class="col-12 px-0">
                <p-calendar
                  (onSelect)="expiryDateUpdateValueAndValidity($event)"
                  (onInput)="expiryDateUpdateValueAndValidity($event)"
                  placeholder="{{
                    'Sales.Fields.ServiceRequestDate' | translate
                  }}"
                  formControlName="ServiceRequestDate"
                  dateFormat="yy-mm-dd"
                  [monthNavigator]="true"
                  [yearNavigator]="true"
                  yearRange="{{ '1900:' + currentYear }}"
                  class="form-control calendar-form-control p-0"
                  [ngClass]="{
                    'is-invalid':
                      submitted && form.get('ServiceRequestDate').errors
                  }"
                  [minDate]="minDateValue"
                >
                </p-calendar>
                <div
                  class="invalid-feedback"
                  *ngIf="form.get('ServiceRequestDate').errors?.required"
                >
                  {{ "App.Fields.RequiredField" | translate }}
                </div>
              </div>
            </div>
          </div>

          <!-- ExpectedContractDate -->
          <div class="col-lg-2 col-md-4 col-12">
            <div class="form-group m-form__group row mx-0 px-0">
              <div class="col-12 px-0">
                <label class="form-control-label" for="ExpectedContractDate">{{
                  "Sales.Fields.ExpectedContractDate" | translate
                }}</label>
              </div>
              <div class="col-12 px-0">
                <p-calendar
                  placeholder="{{
                    'Sales.Fields.ExpectedContractDate' | translate
                  }}"
                  formControlName="ExpectedContractDate"
                  [monthNavigator]="true"
                  [yearNavigator]="true"
                  yearRange="{{ '1900:' + currentYear }}"
                  dateFormat="yy-mm-dd"
                  class="form-control calendar-form-control p-0"
                  [ngClass]="{
                    'is-invalid':
                      submitted && form.get('ExpectedContractDate').errors
                  }"
                >
                </p-calendar>
                <div
                  class="invalid-feedback"
                  *ngIf="form.get('ExpectedContractDate').errors?.required"
                >
                  {{ "App.Fields.RequiredField" | translate }}
                </div>
              </div>
            </div>
          </div>

          <!-- ExpiryDate -->
          <div class="col-lg-2 col-md-4 col-12">
            <div class="form-group m-form__group row mx-0 px-0">
              <div class="col-12 px-0">
                <label class="form-control-label" for="ExpiryDate">{{
                  "Sales.Fields.ExpiryDate" | translate
                }}</label>
              </div>
              <div class="col-12 px-0">
                <p-calendar
                  placeholder="{{ 'Sales.Fields.ExpiryDate' | translate }}"
                  [monthNavigator]="true"
                  [yearNavigator]="true"
                  yearRange="{{ '1900:' + currentYear }}"
                  formControlName="ExpiryDate"
                  dateFormat="yy-mm-dd"
                  class="form-control calendar-form-control p-0"
                  [ngClass]="{
                    'is-invalid': submitted && form.get('ExpiryDate').errors
                  }"
                >
                </p-calendar>
                <div
                  class="invalid-feedback"
                  *ngIf="form.get('ExpiryDate').errors?.required"
                >
                  {{ "App.Fields.RequiredField" | translate }}
                </div>
                <div
                  class="invalid-feedback"
                  *ngIf="form.get('ExpiryDate').errors?.minDate"
                >
                  {{
                    "App.Fields.ServiceRequestMinDateOfExpiryDate" | translate
                  }}
                </div>
              </div>
            </div>
          </div>

          <!-- ExpiryTime-->
          <div class="col-lg-2 col-md-4 col-12">
            <div class="form-group m-form__group row mx-0 px-0">
              <div class="col-12 px-0 text-nowrap">
                <label class="form-control-label" for="ExpiryTime">{{
                  "Sales.Fields.ExpiryTime" | translate
                }}</label>
                <span class="required">*</span>
              </div>
              <div class="col-12 px-0">
                <p-calendar
                  id="ExpiryTime"
                  [timeOnly]="true"
                  hourFormat="12"
                  placeholder="{{ 'Sales.Fields.ExpiryTime' | translate }}"
                  formControlName="ExpiryTime"
                  class="form-control calendar-form-control p-0"
                  [ngClass]="{
                    'is-invalid':
                      submitted && form.get('ExpiryTime').errors?.required
                  }"
                >
                </p-calendar>
                <!-- <p-calendar id="ExpiryTime" timeOnly="true" hourFormat="12" placeholder="وقت انتهاء الطلب"
                formControlName="ExpiryTime" class="form-control calendar-form-control  p-0 " [ngClass]="{
                      'is-invalid':
                        submitted && form.get('ExpiryTime').errors?.required
                    }">
              </p-calendar> -->
                <div
                  class="invalid-feedback"
                  *ngIf="submitted && form.get('ExpiryTime').errors?.required"
                >
                  {{ "App.Fields.RequiredField" | translate }}
                </div>
              </div>
            </div>
          </div>

          <!-- Branch -->
          <div class="col-lg-3 col-md-6 col-12">
            <div class="form-group m-form__group row mx-0 px-0">
              <div class="col-12 px-0">
                <label class="form-control-label" for="branch">
                  {{ "App.Fields.Branch" | translate }}
                </label>
                <span class="required">*</span>
              </div>
              <div class="col-12 px-0">
                <input
                  type="text"
                  class="form-control"
                  formControlName="BranchName"
                  id="branch"
                />
              </div>
            </div>
          </div>

          <!-- ServiceRequestStatus -->
          <div class="col-lg-3 col-md-6 col-12">
            <div class="form-group m-form__group row mx-0 px-0">
              <div class="col-12 px-0">
                <label class="form-control-label" for="ServiceRequestStatus">{{
                  "Sales.Fields.ServiceRequestStatus" | translate
                }}</label>
                <span class="required">*</span>
              </div>
              <div class="col-12 px-0">
                <p-autoComplete
                  class="p-0 form-control"
                  field="Name"
                  formControlName="ServiceRequestStatus"
                  [suggestions]="filteredArray"
                  (onClear)="onClear('ServiceRequestStatus')"
                  (completeMethod)="
                    filterArray(
                      $event,
                      viewModel?.ServiceRequestStatuses,
                      'Name'
                    )
                  "
                  [forceSelection]="true"
                  [size]="30"
                  [minLength]="1"
                  placeholder="{{
                    'Sales.Fields.ServiceRequestStatusSelect' | translate
                  }}"
                  [dropdown]="true"
                  [ngClass]="{
                    'is-invalid':
                      submitted && form.controls.ServiceRequestStatus.errors
                  }"
                >
                  <ng-template let-ServiceRequestStatus pTemplate="item">
                    <div class="ui-helper-clearfix">
                      <div>
                        {{ ServiceRequestStatus.Name }}
                      </div>
                    </div>
                  </ng-template>
                </p-autoComplete>
                <div
                  class="invalid-feedback"
                  *ngIf="form.get('ServiceRequestStatus').errors?.required"
                >
                  {{ "App.Fields.RequiredField" | translate }}
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-------------------------------------- بيانات العميل -------------------------------------->
        <div class="row tableHeader mx-0 px-0">
          <label class="m-form__heading-title py-3 mb-0">{{
            "App.Titles.CustomerData" | translate
          }}</label>
        </div>
        <!-- Customer Info -->
        <div class="row tableBody py-2 mx-0 px-0">
          <!-- customerNumber -->
          <div class="col-lg-3 col-md-6 col-12">
            <div class="form-group m-form__group row mx-0 px-0">
              <div class="col-12 px-0">
                <label class="form-control-label" for="customerNumber">{{
                  "Sales.Fields.CustomerId" | translate
                }}</label>
                <span class="required">*</span>
              </div>
              <div class="col-12 px-0">
                <p-autoComplete
                  class="p-0 form-control"
                  field="FullName"
                  formControlName="Customer"
                  [suggestions]="filteredCustomersArray"
                  (onClear)="onClear('Customer'); selectedCustomer = undefined"
                  (completeMethod)="searchCustomer($event)"
                  (onSelect)="onSelectCustomer($event)"
                  [forceSelection]="true"
                  [size]="30"
                  [minLength]="1"
                  placeholder="{{ 'App.Fields.CustomerSelect' | translate }}"
                  [dropdown]="true"
                  [ngClass]="{
                    'is-invalid': submitted && form.controls.Customer.errors
                  }"
                >
                  <ng-template let-Customer pTemplate="item">
                    <div class="ui-helper-clearfix">
                      <div>
                        {{ Customer.FullName }}
                      </div>
                    </div>
                  </ng-template>
                </p-autoComplete>
                <div
                  class="invalid-feedback"
                  *ngIf="form.get('Customer').errors?.required"
                >
                  {{ "App.Fields.RequiredField" | translate }}
                </div>
              </div>
            </div>
          </div>
          <div class="row mx-0 px-3 details-card pb-2" *ngIf="selectedCustomer">
            <div class="details-label">
              <span>{{ "Sales.Fields.CustomerName" | translate }}</span>
            </div>
            <div class="details-value">
              <span>{{ selectedCustomer.Name }}</span>
            </div>
            <div class="details-label">
              <span>{{ "Sales.Fields.CustomerPhone" | translate }}</span>
            </div>
            <div class="details-value">
              <span>{{ selectedCustomer.PhoneNumber }}</span>
            </div>
            <div class="col-12 px-0">
              <div class="details-label">
                <span>{{ "Sales.Fields.CustomerAddress" | translate }}</span>
              </div>
            </div>
            <div class="details-label">
              <span>{{ "App.Fields.Area" | translate }}</span>
            </div>
            <div class="details-value">
              <span>{{ selectedCustomer.AreaArabicName }}</span>
            </div>
            <div class="details-label">
              <span>{{ "App.Fields.City" | translate }}</span>
            </div>
            <div class="details-value">
              <span>{{ selectedCustomer.CityArabicName }}</span>
            </div>
            <div class="col-lg-3 col-md-6 col-12 px-0 mt-4">
              <div class="form-group m-form__group row mx-0 px-0">
                <div class="col-12 px-0">
                  <label
                    class="form-control-label"
                    for="requestServiceNumberRef"
                    >{{ "Sales.Fields.ContactPerson" | translate }}</label
                  >
                </div>
                <div class="col-12 px-0">
                  <input
                    class="form-control"
                    id="requestServiceNumberRef"
                    placeholder="{{ 'Sales.Fields.ContactPerson' | translate }}"
                    type="text"
                    [(ngModel)]="selectedCustomer.ContactPerson"
                    [ngModelOptions]="{ standalone: true }"
                  />
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-6 col-12 mt-4">
              <div class="form-group m-form__group row mx-0 px-0">
                <div class="col-12 px-0">
                  <label
                    class="form-control-label"
                    for="requestServiceNumberRef"
                    >{{
                      "Sales.Fields.ContactPersonPhoneNumber" | translate
                    }}</label
                  >
                </div>
                <div class="col-12 px-0">
                  <input
                    class="form-control"
                    id="requestServiceNumberRef"
                    placeholder="{{
                      'Sales.Fields.ContactPersonPhoneNumber' | translate
                    }}"
                    type="text"
                    [(ngModel)]="selectedCustomer.ContactPersonPhoneNumber"
                    [ngModelOptions]="{ standalone: true }"
                  />
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-6 col-12 px-0 mt-4">
              <div class="form-group m-form__group row mx-0 px-0">
                <div class="col-12 px-0">
                  <label
                    class="form-control-label"
                    for="requestServiceNumberRef"
                    >{{
                      "Sales.Fields.ContactPersonAddress" | translate
                    }}</label
                  >
                </div>
                <div class="col-12 px-0">
                  <input
                    class="form-control"
                    id="requestServiceNumberRef"
                    placeholder="{{
                      'Sales.Fields.ContactPersonAddress' | translate
                    }}"
                    type="text"
                    [(ngModel)]="selectedCustomer.ContactPersonAddress"
                    [ngModelOptions]="{ standalone: true }"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-------------------------------------- بيانات الباقة -------------------------------------->
        <div class="row tableHeader mx-0 px-0">
          <label class="m-form__heading-title py-3 mb-0">{{
            "Sales.Titles.BundleDetails" | translate
          }}</label>
        </div>
        <div class="row tableBody py-2 mx-0 px-0">
          <!-- nationality -->
          <div class="col-lg-3 col-md-6 col-12">
            <div class="form-group m-form__group row mx-0 px-0">
              <div class="col-12 px-0">
                <label class="form-control-label" for="nationality">{{
                  "App.Fields.Nationality" | translate
                }}</label>
                <span class="required">*</span>
              </div>
              <div class="col-12 px-0">
                <p-autoComplete
                  class="p-0 form-control"
                  field="FullArabicName"
                  [suggestions]="filteredArray"
                  (onSelect)="
                    onSelectProfessionIdOrNationality(null, $event);
                    selectedLaborer = null;
                    selectedBundle = null;
                    onClear('LaborerFile')
                  "
                  (completeMethod)="
                    filterArray($event, viewModel?.Nationalities);
                    selectedLaborer = null;
                    selectedBundle = null;
                    onClear('LaborerFile')
                  "
                  [forceSelection]="true"
                  [size]="30"
                  [minLength]="1"
                  placeholder="{{ 'App.Fields.NationalitySelect' | translate }}"
                  [dropdown]="true"
                  [ngClass]="{
                    'is-invalid': submitted && !selectedNationality
                  }"
                >
                  <ng-template let-Nationality pTemplate="item">
                    <div class="ui-helper-clearfix">
                      <div>
                        {{ Nationality.FullArabicName }}
                      </div>
                    </div>
                  </ng-template>
                </p-autoComplete>
                <div
                  class="invalid-feedback"
                  *ngIf="!selectedNationality && submitted"
                >
                  {{ "App.Fields.RequiredField" | translate }}
                </div>
              </div>
            </div>
          </div>

          <!-- Profession -->
          <div class="col-lg-3 col-md-6 col-12">
            <div class="form-group m-form__group row mx-0 px-0">
              <div class="col-12 px-0">
                <label class="form-control-label" for="profession">{{
                  "App.Fields.Profession" | translate
                }}</label>
                <span class="required">*</span>
              </div>
              <div class="col-12 px-0">
                <p-autoComplete
                  class="p-0 form-control"
                  field="FullArabicName"
                  [suggestions]="filteredArray"
                  (completeMethod)="filterArray($event, viewModel?.Professions)"
                  (onSelect)="
                    onSelectProfessionIdOrNationality($event, null);
                    selectedLaborer = null;
                    selectedBundle = null;
                    onClear('LaborerFile')
                  "
                  [forceSelection]="true"
                  [size]="30"
                  [minLength]="1"
                  placeholder="{{ 'App.Fields.ProfessionSelect' | translate }}"
                  [dropdown]="true"
                  [ngClass]="{
                    'is-invalid': submitted && !selectedProfession
                  }"
                >
                  <ng-template let-Profession pTemplate="item">
                    <div class="ui-helper-clearfix">
                      <div>
                        {{ Profession.FullArabicName }}
                      </div>
                    </div>
                  </ng-template>
                </p-autoComplete>
                <div
                  class="invalid-feedback"
                  *ngIf="!selectedProfession && submitted"
                >
                  {{ "App.Fields.RequiredField" | translate }}
                </div>
              </div>
            </div>
          </div>
          <!-- Bundles table -->
          <div class="col-12 px-0 mb-3 box-shadow" *ngIf="bundles">
            <p-table
              [columns]="bundleCols"
              [value]="bundles"
              [(selection)]="selectedBundle"
              dataKey="Id"
              (onRowSelect)="searchLaborer()"
              (onRowUnselect)="onUnselectBundle()"
              [paginator]="true"
              [rows]="4"
              class="table"
            >
              <ng-template pTemplate="header" let-columns>
                <tr>
                  <th></th>
                  <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                    {{ col.header | translate }}
                    <!-- <p-sortIcon [field]="col.field"></p-sortIcon> -->
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr [pSelectableRow]="rowData">
                  <td>
                    <p-tableRadioButton
                      [value]="rowData"
                      [disabled]="!form.get('Branch').value"
                    ></p-tableRadioButton>
                  </td>
                  <td *ngFor="let col of columns">{{ rowData[col.field] }}</td>
                </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage" let-columns>
                <tr *ngIf="bundles.length === 0">
                  <td [attr.colspan]="columns?.length" class="empty-grid-table">
                    <span class="emp-msg">
                      {{ "App.Fields.NoData" | translate }}
                    </span>
                  </td>
                </tr>
              </ng-template>
            </p-table>
            <div
              class="p-2"
              style="color: #f4516c"
              *ngIf="!selectedBundle && submitted"
            >
              {{ "Sales.Fields.SelectBundle" | translate }}
            </div>
          </div>
        </div>

        <!-------------------------------------- بيانات العامل -------------------------------------->
        <div class="row tableHeader mx-0 px-2 d-flex justify-content-between">
          <div class="switch_lblFlx">
            <p-inputSwitch
              (onChange)="onAssignLaborsChange($event)"
              formControlName="AssignLabor"
            ></p-inputSwitch>
            <label>{{ "Sales.Fields.AddLaborer" | translate }}</label>
          </div>
          <button
            (click)="getBranchesLaborers()"
            data-toggle="modal"
            data-target="#showLaborers"
            type="button"
            [disabled]="!selectedBundle || !AssignLabor?.value"
            class="btn btn-brand btn-cons my-2"
          >
            {{ "Sales.Buttons.BranchsLaborers" | translate }}
          </button>
        </div>
        <div class="row tableBody py-2 mx-0 px-0" >

          <!-- search Input  -->
          <div class="col-12 list px-0 mb-3" *ngIf="selectedBundle && AssignLabor?.value">
            <form class="m-form m-form--fit m-form--label-align-right">
              <div class="tableBody row py-2 mx-0 px-0">
                <!-- Search -->
                <div class="col-lg-3 col-md-6 col-12">
                  <div class="form-group m-form__group row mx-0 px-0">
                    <div class="col-12 px-0">
                      <input
                        class="form-control"
                        placeholder="{{
                          'Sales.Fields.searchHere' | translate
                        }}"
                        type="text"
                        [(ngModel)]="searchTerm"
                        [ngModelOptions]="{ standalone: true }"
                      />
                    </div>
                  </div>
                </div>

                <div class="col-lg-2 col-md-6 col-12">
                  <div class="form-group m-form__group row mx-0 px-0 mt-2">
                    <div class="col-12 px-0 mt-4">
                      <button
                        class="btn btn-save-cancel btn-brand"
                        type="button"
                        style="margin-top: -31px"
                        (click)="searchLaborer()"
                      >
                        {{ "App.Buttons.Search" | translate }}
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>

          <!-- laborers table -->

          <div
            class="col-12 mt-2 list px-0 box-shadow"
            *ngIf="selectedBundle && AssignLabor?.value"
          >
            <p-table
              [columns]="laborerCols"
              [value]="filteredLaborerFileArray"
              [(selection)]="selectedLaborer"
              dataKey="Id"
              [lazy]="true"
              (onLazyLoad)="loadLabores($event)"
              [paginator]="true"
              [rows]="10"
              [totalRecords]="totalRecords"
              [loading]="loading"
              [rows]="4"
              [responsive]="true"
              class="w-100"
            >
              <ng-template pTemplate="header" let-columns>
                <tr>
                  <th></th>
                  <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                    {{ col.header | translate }}
                    <!-- <p-sortIcon [field]="col.field"></p-sortIcon> -->
                  </th>

                  <th>{{ "App.Fields.Actions" | translate }}</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr [pSelectableRow]="rowData">
                  <td>
                    <p-tableRadioButton [value]="rowData"></p-tableRadioButton>
                  </td>
                  <td *ngFor="let col of columns">{{ rowData[col.field] }}</td>
                  <td>
                    <span class="d-flex justify-content-center">
                      <span class="d-inline-block">
                        <a
                          (click)="setId(rowData.Id)"
                          data-toggle="modal"
                          data-target="#detailsModal"
                          class="dropdown-item cursor-pointer px-1"
                        >
                          {{ "App.Buttons.Details" | translate }}
                        </a>
                      </span>
                    </span>
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage" let-columns>
                <tr *ngIf="filteredLaborerFileArray?.length === 0">
                  <td [attr.colspan]="columns?.length" class="empty-grid-table">
                    <span class="emp-msg">
                      {{ "App.Fields.NoData" | translate }}
                    </span>
                  </td>
                </tr>
              </ng-template>
            </p-table>

            <div
              class="p-2"
              style="color: #f4516c"
              *ngIf="!selectedLaborer && submitted"
            >
              {{ "Sales.Messages.MustHaveLabourers" | translate }}
            </div>
          </div>
          <!-- Laborer Details -->
          <!-- <div class="col-12" *ngIf="selectedLaborer">
            <div class="m-portlet__body  ">
              <div class="row p-0 m-0 details-card">
                <div class="details-label">
                  <span>{{'App.Fields.LaborerFileName' | translate}}</span>
                </div>
                <div class="details-value">
                  <span>{{ selectedLaborer.FullName }}</span>
                </div>

                <div class="details-label">
                  <span>{{'App.Fields.Nationality' | translate}}</span>
                </div>
                <div class="details-value">
                  <span>{{ selectedLaborer.NationalityArabicName }}</span>
                </div>
                <div class="details-label">
                  <span>{{'App.Fields.Profession' | translate}}</span>
                </div>
                <div class="details-value">
                  <span>{{ selectedLaborer.ReligionArabicName }}</span>
                </div>
                <div class="details-label">
                  <span>{{'App.Fields.HouseAddress' | translate}}</span>
                </div>
                <div class="details-value">
                  <span>{{ selectedLaborer.HouseArabicName }}</span>
                </div>
                <div class="details-label">
                  <span>{{'App.Fields.Branch' | translate}}</span>
                </div>
                <div class="details-value">
                  <span>{{ selectedLaborer.BranchArabicName }}</span>
                </div>
                <div class="details-label">
                  <span>{{'App.Fields.OfficeNumber' | translate}}</span>
                </div>
                <div class="details-value">
                  <span>{{ selectedLaborer.LaborerOfficeNumber }}</span>
                </div>


              </div>
            </div>
          </div> -->

          <div
            class="col-12 m-form__actions m-form__actions ml-lg-auto text-center p-3"
          >
            <button class="btn btn-save-cancel mb-1 btn-brand" type="submit">
              {{ "App.Buttons.Save" | translate }}</button
            >&nbsp;&nbsp;
            <button
              [routerLink]="['/sales/list-requests-services']"
              class="btn btn-save-cancel mb-1 btn-secondary"
              type="button"
            >
              {{ "App.Buttons.Cancel" | translate }}
            </button>
          </div>
        </div>
      </form>
      <!--end::Form-->
      <!--end::Form-->
    </div>
  </div>
</div>

<!--begin::Modal for Laborers-->
<div
  class="custom-bottom-aside-modal modal fade"
  id="showLaborers"
  tabindex="-1"
  role="dialog"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-80" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title" id="exampleModalLabel">
          {{ "Sales.Buttons.BranchsLaborers" | translate }}
        </h6>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row py-2">
          <div class="col-12" *ngIf="allLaborers">
            <p-table
              [columns]="laborerCols"
              [value]="allLaborers"
              dataKey="LaborerId"
              [paginator]="true"
              [rows]="5"
            >
              <ng-template pTemplate="header" let-columns>
                <tr>
                  <th
                    *ngFor="let col of columns"
                    [pSortableColumn]="col.field"
                    [hidden]="col.hidden"
                  >
                    {{ col.header | translate }}
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr>
                  <td *ngFor="let col of columns" [hidden]="col.hidden">
                    {{ rowData[col.field] }}
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage" let-columns>
                <tr *ngIf="allLaborers?.length === 0">
                  <td [attr.colspan]="columns?.length" class="empty-grid-table">
                    <span class="emp-msg">
                      {{ "App.Fields.NoData" | translate }}
                    </span>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="m-auto">
          <button
            type="button"
            data-dismiss="modal"
            class="btn btn-save-cancel btn-secondary mb-2"
          >
            {{ "App.Buttons.Cancel" | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!--begin::Modal for Edit Laborer Attachments-->
<div
  class="custom-bottom-aside-modal modal fade"
  id="detailsModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <app-laborer-details></app-laborer-details>
</div>

<app-shared-progress-spinner
  [hidden]="!progressSpinner"
></app-shared-progress-spinner>
